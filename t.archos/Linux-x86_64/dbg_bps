#!/bin/sh
# GPL 3+ - Copyright (C) 2015  pancake

for a in . .. ../.. ; do [ -e $a/tests.sh ] && . $a/tests.sh ; done

# "!" - run commands (via system)

NAME='dbg.dcC+ds.swstep1'
FILE=../../bins/elf/analysis/tiny-crackme-vm-x86_64
ARGS=-d
BROKEN=
CMDS='e scr.color=0
e dbg.swstep=true
f times=5
(times_stop,?e Loop `?vi times`,f times=`?vi times-1`,?= times)
db 0x4000ce
dbC 0x4000ce .(times_stop)
dc
dk 9
'
EXPECT='Loop 5
Loop 4
Loop 3
Loop 2
Loop 1
'
run_test
